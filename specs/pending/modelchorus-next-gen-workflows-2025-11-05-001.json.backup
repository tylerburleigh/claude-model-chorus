{
  "spec_id": "modelchorus-next-gen-workflows-2025-11-05-001",
  "generated": "2025-11-05T12:00:00Z",
  "last_updated": "2025-11-05T12:00:00Z",
  "metadata": {
    "title": "ModelChorus Next-Generation Workflows",
    "description": "Extend ModelChorus with conversation infrastructure, CHAT workflow for peer consultation, and THINKDEEP workflow for deep reasoning. Strategic implementation based on multi-model consensus (Claude, Gemini, Codex).",
    "status": "pending",
    "estimated_hours": 80,
    "complexity": "high",
    "review": {
      "status": "not_reviewed",
      "last_reviewed": null,
      "reviewers": [],
      "total_reviews": 0,
      "history": []
    }
  },

  "hierarchy": {
    "spec-root": {
      "type": "spec",
      "title": "ModelChorus Next-Generation Workflows",
      "status": "pending",
      "parent": null,
      "children": ["phase-1", "phase-2", "phase-3", "phase-4", "phase-5"],
      "total_tasks": 62,
      "completed_tasks": 0,
      "metadata": {
        "objectives": [
          "Establish conversation infrastructure as foundation for all workflows",
          "Validate infrastructure with simple CHAT workflow",
          "Differentiate platform with THINKDEEP deep reasoning workflow",
          "Enable 10+ turn conversations without context loss",
          "Prove orchestration value vs raw CLI usage"
        ]
      }
    },

    "phase-1": {
      "type": "phase",
      "title": "Conversation Infrastructure",
      "status": "pending",
      "parent": "spec-root",
      "children": ["phase-1-files", "phase-1-verify"],
      "total_tasks": 14,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Build foundational conversation threading, state management, and context preservation",
        "risk_level": "medium",
        "estimated_hours": 20
      }
    },

    "phase-1-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-1",
      "children": ["task-1-1", "task-1-2", "task-1-3", "task-1-4", "task-1-5", "task-1-6", "task-1-7", "task-1-8", "task-1-9", "task-1-10"],
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-1-1": {
      "type": "task",
      "title": "Analyze Zen MCP conversation patterns",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-1-1", "task-1-1-2", "task-1-1-3"],
      "dependencies": {
        "blocks": ["task-1-2", "task-1-3"],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation",
        "estimated_hours": 3,
        "description": "Study Zen MCP's continuation_id pattern, state management, and context preservation implementation"
      }
    },

    "task-1-1-1": {
      "type": "subtask",
      "title": "Examine Zen MCP continuation_id implementation",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation",
        "reference_path": "~/Downloads/zen-mcp-server-main"
      }
    },

    "task-1-1-2": {
      "type": "subtask",
      "title": "Study Zen MCP state persistence mechanisms",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation"
      }
    },

    "task-1-1-3": {
      "type": "subtask",
      "title": "Analyze Zen MCP context preservation strategies",
      "status": "pending",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "task_category": "investigation"
      }
    },

    "task-1-2": {
      "type": "task",
      "title": "src/modelchorus/core/models.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-2-1", "task-1-2-2", "task-1-2-3"],
      "dependencies": {
        "blocks": ["task-1-3", "task-1-4"],
        "blocked_by": ["task-1-1"],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/core/models.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Create Pydantic models for conversation infrastructure"
      }
    },

    "task-1-2-1": {
      "type": "subtask",
      "title": "Define ConversationMessage model",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "role, content, timestamp, metadata fields"
      }
    },

    "task-1-2-2": {
      "type": "subtask",
      "title": "Define ConversationThread model",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "continuation_id, messages list, state dict, created/updated timestamps"
      }
    },

    "task-1-2-3": {
      "type": "subtask",
      "title": "Define ConversationState model",
      "status": "pending",
      "parent": "task-1-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Generic state container with workflow-specific data"
      }
    },

    "task-1-3": {
      "type": "task",
      "title": "src/modelchorus/core/conversation.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-3-1", "task-1-3-2", "task-1-3-3", "task-1-3-4"],
      "dependencies": {
        "blocks": ["task-1-5", "task-1-6"],
        "blocked_by": ["task-1-1", "task-1-2"],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/core/conversation.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "Implement ConversationMemory class for thread management"
      }
    },

    "task-1-3-1": {
      "type": "subtask",
      "title": "Implement thread creation and continuation_id generation",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "UUID-based continuation_id, thread initialization"
      }
    },

    "task-1-3-2": {
      "type": "subtask",
      "title": "Implement message addition and retrieval",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Thread-safe message storage, retrieval by continuation_id"
      }
    },

    "task-1-3-3": {
      "type": "subtask",
      "title": "Implement context window management",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Sliding window, context summarization for long conversations"
      }
    },

    "task-1-3-4": {
      "type": "subtask",
      "title": "Implement thread cleanup and lifecycle management",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Timeout-based cleanup, manual thread termination"
      }
    },

    "task-1-4": {
      "type": "task",
      "title": "src/modelchorus/core/state.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-4-1", "task-1-4-2", "task-1-4-3"],
      "dependencies": {
        "blocks": ["task-1-6"],
        "blocked_by": ["task-1-2"],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/core/state.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Implement state persistence layer"
      }
    },

    "task-1-4-1": {
      "type": "subtask",
      "title": "Implement in-memory state storage",
      "status": "pending",
      "parent": "task-1-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Thread-safe dict for state persistence"
      }
    },

    "task-1-4-2": {
      "type": "subtask",
      "title": "Implement state serialization/deserialization",
      "status": "pending",
      "parent": "task-1-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "JSON serialization for Pydantic models"
      }
    },

    "task-1-4-3": {
      "type": "subtask",
      "title": "Add optional file-based persistence",
      "status": "pending",
      "parent": "task-1-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Optional disk persistence for conversation history"
      }
    },

    "task-1-5": {
      "type": "task",
      "title": "src/modelchorus/core/base_workflow.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-5-1", "task-1-5-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-1-3"],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/core/base_workflow.py",
        "task_category": "refactoring",
        "estimated_hours": 2,
        "description": "Extend BaseWorkflow to support conversation-aware workflows"
      }
    },

    "task-1-5-1": {
      "type": "subtask",
      "title": "Add conversation_memory parameter to BaseWorkflow",
      "status": "pending",
      "parent": "task-1-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Optional ConversationMemory injection"
      }
    },

    "task-1-5-2": {
      "type": "subtask",
      "title": "Add conversation utility methods to BaseWorkflow",
      "status": "pending",
      "parent": "task-1-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "get_thread(), add_message(), resume_conversation() helpers"
      }
    },

    "task-1-6": {
      "type": "task",
      "title": "src/modelchorus/providers/base_provider.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-6-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-1-3", "task-1-4"],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/providers/base_provider.py",
        "task_category": "refactoring",
        "estimated_hours": 1,
        "description": "Update provider interface for conversation context"
      }
    },

    "task-1-6-1": {
      "type": "subtask",
      "title": "Add continuation_id parameter to GenerationRequest",
      "status": "pending",
      "parent": "task-1-6",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Optional continuation_id for conversation threading"
      }
    },

    "task-1-7": {
      "type": "task",
      "title": "src/modelchorus/providers/cli_provider.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-7-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-1-6"],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/providers/cli_provider.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Implement conversation context passing for CLI providers"
      }
    },

    "task-1-7-1": {
      "type": "subtask",
      "title": "Pass conversation history to CLI commands",
      "status": "pending",
      "parent": "task-1-7",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Serialize conversation context for CLI invocation"
      }
    },

    "task-1-8": {
      "type": "task",
      "title": "src/modelchorus/core/__init__.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-8-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-1-2", "task-1-3", "task-1-4"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/core/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Export new conversation infrastructure"
      }
    },

    "task-1-8-1": {
      "type": "subtask",
      "title": "Add conversation module exports",
      "status": "pending",
      "parent": "task-1-8",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Export ConversationMemory, ConversationThread, ConversationMessage, ConversationState"
      }
    },

    "task-1-9": {
      "type": "task",
      "title": "tests/test_conversation.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-9-1", "task-1-9-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-1-3"]
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_conversation.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Unit tests for conversation infrastructure"
      }
    },

    "task-1-9-1": {
      "type": "subtask",
      "title": "Test thread creation and continuation_id generation",
      "status": "pending",
      "parent": "task-1-9",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-1-9-2": {
      "type": "subtask",
      "title": "Test message addition, retrieval, and context management",
      "status": "pending",
      "parent": "task-1-9",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-1-10": {
      "type": "task",
      "title": "tests/test_state.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": ["task-1-10-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-1-4"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_state.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Unit tests for state persistence"
      }
    },

    "task-1-10-1": {
      "type": "subtask",
      "title": "Test state serialization and persistence",
      "status": "pending",
      "parent": "task-1-10",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "phase-1-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-1",
      "children": ["verify-1-1", "verify-1-2", "verify-1-3", "verify-1-4"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-1-files"],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {}
    },

    "verify-1-1": {
      "type": "verify",
      "title": "Conversation threading works across 10+ turns",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can create thread, add 10+ messages, retrieve full history"
      }
    },

    "verify-1-2": {
      "type": "verify",
      "title": "State persistence survives process restart",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can save state, restart process, reload state successfully"
      }
    },

    "verify-1-3": {
      "type": "verify",
      "title": "Unit tests pass",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/test_conversation.py tests/test_state.py -v",
        "expected": "All tests pass"
      }
    },

    "verify-1-4": {
      "type": "verify",
      "title": "Context window management prevents memory overflow",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Long conversations (50+ turns) don't cause memory issues"
      }
    },

    "phase-2": {
      "type": "phase",
      "title": "CHAT Workflow (Infrastructure Validation)",
      "status": "pending",
      "parent": "spec-root",
      "children": ["phase-2-files", "phase-2-verify"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-1"],
        "depends": []
      },
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement simple peer consultation workflow to validate conversation infrastructure",
        "risk_level": "low",
        "estimated_hours": 12
      }
    },

    "phase-2-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-2",
      "children": ["task-2-1", "task-2-2", "task-2-3", "task-2-4", "task-2-5", "task-2-6"],
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-2-1": {
      "type": "task",
      "title": "src/modelchorus/workflows/chat.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": ["task-2-1-1", "task-2-1-2", "task-2-1-3", "task-2-1-4"],
      "dependencies": {
        "blocks": ["task-2-2", "task-2-3"],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/workflows/chat.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "Implement ChatWorkflow for single-model peer consultation"
      }
    },

    "task-2-1-1": {
      "type": "subtask",
      "title": "Create ChatWorkflow class extending BaseWorkflow",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Single provider, conversation-aware"
      }
    },

    "task-2-1-2": {
      "type": "subtask",
      "title": "Implement conversation initiation",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Create new thread or resume existing via continuation_id"
      }
    },

    "task-2-1-3": {
      "type": "subtask",
      "title": "Implement message handling and response generation",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Send message with conversation context, store response"
      }
    },

    "task-2-1-4": {
      "type": "subtask",
      "title": "Implement file context sharing",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Optional file paths to include in conversation context"
      }
    },

    "task-2-2": {
      "type": "task",
      "title": "src/modelchorus/cli/chat_commands.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": ["task-2-2-1", "task-2-2-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-2-1"],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/cli/chat_commands.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "CLI commands for CHAT workflow"
      }
    },

    "task-2-2-1": {
      "type": "subtask",
      "title": "Implement 'modelchorus chat' command",
      "status": "pending",
      "parent": "task-2-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Start new conversation with specified provider"
      }
    },

    "task-2-2-2": {
      "type": "subtask",
      "title": "Implement conversation continuation support",
      "status": "pending",
      "parent": "task-2-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "--continue-id flag to resume conversations"
      }
    },

    "task-2-3": {
      "type": "task",
      "title": "src/modelchorus/cli/main.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": ["task-2-3-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-2-2"],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/cli/main.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Register chat commands in CLI"
      }
    },

    "task-2-3-1": {
      "type": "subtask",
      "title": "Import and register chat commands",
      "status": "pending",
      "parent": "task-2-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-2-4": {
      "type": "task",
      "title": "src/modelchorus/workflows/__init__.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": ["task-2-4-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-2-1"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/workflows/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Export ChatWorkflow"
      }
    },

    "task-2-4-1": {
      "type": "subtask",
      "title": "Add ChatWorkflow to exports",
      "status": "pending",
      "parent": "task-2-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-2-5": {
      "type": "task",
      "title": "examples/chat_example.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": ["task-2-5-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-2-1"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "examples/chat_example.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Example script demonstrating CHAT workflow"
      }
    },

    "task-2-5-1": {
      "type": "subtask",
      "title": "Create multi-turn conversation example",
      "status": "pending",
      "parent": "task-2-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Show conversation creation, continuation, file context"
      }
    },

    "task-2-6": {
      "type": "task",
      "title": "tests/test_chat_workflow.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": ["task-2-6-1", "task-2-6-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-2-1"]
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_chat_workflow.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Integration tests for CHAT workflow"
      }
    },

    "task-2-6-1": {
      "type": "subtask",
      "title": "Test conversation initiation and continuation",
      "status": "pending",
      "parent": "task-2-6",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-2-6-2": {
      "type": "subtask",
      "title": "Test file context sharing",
      "status": "pending",
      "parent": "task-2-6",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "phase-2-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-2",
      "children": ["verify-2-1", "verify-2-2", "verify-2-3", "verify-2-4"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-2-files"],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {}
    },

    "verify-2-1": {
      "type": "verify",
      "title": "CLI chat command works",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "modelchorus chat 'Hello' -p gemini",
        "expected": "Receives response from Gemini, returns continuation_id"
      }
    },

    "verify-2-2": {
      "type": "verify",
      "title": "Conversation continuation works",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "modelchorus chat 'Follow-up question' --continue-id <id>",
        "expected": "Response includes context from previous messages"
      }
    },

    "verify-2-3": {
      "type": "verify",
      "title": "Multi-turn conversations maintain context",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "10+ turn conversation shows no context loss"
      }
    },

    "verify-2-4": {
      "type": "verify",
      "title": "Unit tests pass",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/test_chat_workflow.py -v",
        "expected": "All tests pass"
      }
    },

    "phase-3": {
      "type": "phase",
      "title": "THINKDEEP Workflow (Strategic Differentiation)",
      "status": "pending",
      "parent": "spec-root",
      "children": ["phase-3-files", "phase-3-verify"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-1"],
        "depends": []
      },
      "total_tasks": 16,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement multi-step investigation workflow with hypothesis tracking",
        "risk_level": "medium",
        "estimated_hours": 24
      }
    },

    "phase-3-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-3",
      "children": ["task-3-1", "task-3-2", "task-3-3", "task-3-4", "task-3-5", "task-3-6", "task-3-7", "task-3-8"],
      "total_tasks": 12,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-3-1": {
      "type": "task",
      "title": "src/modelchorus/workflows/thinkdeep_models.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-1-1", "task-3-1-2", "task-3-1-3", "task-3-1-4"],
      "dependencies": {
        "blocks": ["task-3-2"],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/workflows/thinkdeep_models.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Data models for THINKDEEP workflow"
      }
    },

    "task-3-1-1": {
      "type": "subtask",
      "title": "Define Hypothesis model",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "hypothesis text, evidence, status (active/disproven/validated)"
      }
    },

    "task-3-1-2": {
      "type": "subtask",
      "title": "Define ConfidenceLevel enum",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "exploring, low, medium, high, very_high, almost_certain, certain"
      }
    },

    "task-3-1-3": {
      "type": "subtask",
      "title": "Define InvestigationStep model",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "step number, findings, files checked, confidence level"
      }
    },

    "task-3-1-4": {
      "type": "subtask",
      "title": "Define ThinkDeepState model",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "hypotheses list, steps list, current confidence, relevant files"
      }
    },

    "task-3-2": {
      "type": "task",
      "title": "src/modelchorus/workflows/thinkdeep.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-2-1", "task-3-2-2", "task-3-2-3", "task-3-2-4", "task-3-2-5"],
      "dependencies": {
        "blocks": ["task-3-3", "task-3-4"],
        "blocked_by": ["task-3-1"],
        "depends": []
      },
      "total_tasks": 5,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/workflows/thinkdeep.py",
        "task_category": "implementation",
        "estimated_hours": 8,
        "description": "Implement ThinkDeepWorkflow for multi-step investigation"
      }
    },

    "task-3-2-1": {
      "type": "subtask",
      "title": "Create ThinkDeepWorkflow class extending BaseWorkflow",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Conversation-aware, state-tracking workflow"
      }
    },

    "task-3-2-2": {
      "type": "subtask",
      "title": "Implement investigation step execution",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Execute single investigation step, update state"
      }
    },

    "task-3-2-3": {
      "type": "subtask",
      "title": "Implement hypothesis management",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Add, update, validate, disprove hypotheses"
      }
    },

    "task-3-2-4": {
      "type": "subtask",
      "title": "Implement confidence tracking and progression",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Track confidence evolution, determine when investigation complete"
      }
    },

    "task-3-2-5": {
      "type": "subtask",
      "title": "Implement optional expert validation",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Optional second-pass with different model when not 'certain'"
      }
    },

    "task-3-3": {
      "type": "task",
      "title": "src/modelchorus/cli/thinkdeep_commands.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-3-1", "task-3-3-2", "task-3-3-3"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-3-2"],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/cli/thinkdeep_commands.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "CLI commands for THINKDEEP workflow"
      }
    },

    "task-3-3-1": {
      "type": "subtask",
      "title": "Implement 'modelchorus thinkdeep' command",
      "status": "pending",
      "parent": "task-3-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Start new investigation with problem statement"
      }
    },

    "task-3-3-2": {
      "type": "subtask",
      "title": "Implement investigation step progression",
      "status": "pending",
      "parent": "task-3-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Continue investigation, show current hypothesis/confidence"
      }
    },

    "task-3-3-3": {
      "type": "subtask",
      "title": "Implement state inspection commands",
      "status": "pending",
      "parent": "task-3-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "View hypotheses, steps, findings, confidence level"
      }
    },

    "task-3-4": {
      "type": "task",
      "title": "src/modelchorus/cli/main.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-4-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["task-3-3"],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/cli/main.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Register thinkdeep commands in CLI"
      }
    },

    "task-3-4-1": {
      "type": "subtask",
      "title": "Import and register thinkdeep commands",
      "status": "pending",
      "parent": "task-3-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-3-5": {
      "type": "task",
      "title": "src/modelchorus/workflows/__init__.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-5-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-3-2"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "src/modelchorus/workflows/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Export ThinkDeepWorkflow"
      }
    },

    "task-3-5-1": {
      "type": "subtask",
      "title": "Add ThinkDeepWorkflow and models to exports",
      "status": "pending",
      "parent": "task-3-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-3-6": {
      "type": "task",
      "title": "examples/thinkdeep_example.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-6-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-3-2"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "examples/thinkdeep_example.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Example script demonstrating THINKDEEP workflow"
      }
    },

    "task-3-6-1": {
      "type": "subtask",
      "title": "Create multi-step investigation example",
      "status": "pending",
      "parent": "task-3-6",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Show hypothesis evolution, confidence progression, findings accumulation"
      }
    },

    "task-3-7": {
      "type": "task",
      "title": "tests/test_thinkdeep_models.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-7-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-3-1"]
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_thinkdeep_models.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Unit tests for THINKDEEP models"
      }
    },

    "task-3-7-1": {
      "type": "subtask",
      "title": "Test hypothesis and state models",
      "status": "pending",
      "parent": "task-3-7",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-3-8": {
      "type": "task",
      "title": "tests/test_thinkdeep_workflow.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": ["task-3-8-1", "task-3-8-2", "task-3-8-3"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": ["task-3-2"]
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_thinkdeep_workflow.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Integration tests for THINKDEEP workflow"
      }
    },

    "task-3-8-1": {
      "type": "subtask",
      "title": "Test investigation step execution",
      "status": "pending",
      "parent": "task-3-8",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-3-8-2": {
      "type": "subtask",
      "title": "Test hypothesis evolution",
      "status": "pending",
      "parent": "task-3-8",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-3-8-3": {
      "type": "subtask",
      "title": "Test confidence progression",
      "status": "pending",
      "parent": "task-3-8",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "phase-3-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-3",
      "children": ["verify-3-1", "verify-3-2", "verify-3-3", "verify-3-4"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-3-files"],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {}
    },

    "verify-3-1": {
      "type": "verify",
      "title": "Multi-step investigation works end-to-end",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can run 5+ step investigation with hypothesis evolution"
      }
    },

    "verify-3-2": {
      "type": "verify",
      "title": "Confidence tracking progresses correctly",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Confidence level increases as evidence accumulates"
      }
    },

    "verify-3-3": {
      "type": "verify",
      "title": "State persistence works across steps",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can resume investigation, all hypotheses and findings preserved"
      }
    },

    "verify-3-4": {
      "type": "verify",
      "title": "Unit tests pass",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/test_thinkdeep_models.py tests/test_thinkdeep_workflow.py -v",
        "expected": "All tests pass"
      }
    },

    "phase-4": {
      "type": "phase",
      "title": "CLI Integration & Documentation",
      "status": "pending",
      "parent": "spec-root",
      "children": ["phase-4-files", "phase-4-verify"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-2", "phase-3"],
        "depends": []
      },
      "total_tasks": 8,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Integrate new workflows into CLI, add comprehensive documentation",
        "risk_level": "low",
        "estimated_hours": 8
      }
    },

    "phase-4-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-4",
      "children": ["task-4-1", "task-4-2", "task-4-3", "task-4-4", "task-4-5"],
      "total_tasks": 5,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-4-1": {
      "type": "task",
      "title": "README.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": ["task-4-1-1", "task-4-1-2", "task-4-1-3"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "README.md",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Update README with new workflows"
      }
    },

    "task-4-1-1": {
      "type": "subtask",
      "title": "Add CHAT workflow documentation",
      "status": "pending",
      "parent": "task-4-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Description, examples, use cases"
      }
    },

    "task-4-1-2": {
      "type": "subtask",
      "title": "Add THINKDEEP workflow documentation",
      "status": "pending",
      "parent": "task-4-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Description, examples, use cases, hypothesis tracking explanation"
      }
    },

    "task-4-1-3": {
      "type": "subtask",
      "title": "Add conversation infrastructure documentation",
      "status": "pending",
      "parent": "task-4-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "continuation_id pattern, state management, context preservation"
      }
    },

    "task-4-2": {
      "type": "task",
      "title": "docs/WORKFLOWS.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": ["task-4-2-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "docs/WORKFLOWS.md",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Detailed workflow documentation"
      }
    },

    "task-4-2-1": {
      "type": "subtask",
      "title": "Create comprehensive workflow guide",
      "status": "pending",
      "parent": "task-4-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Comparison matrix, when to use each workflow, advanced patterns"
      }
    },

    "task-4-3": {
      "type": "task",
      "title": "docs/CONVERSATION_INFRASTRUCTURE.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": ["task-4-3-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "docs/CONVERSATION_INFRASTRUCTURE.md",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "API documentation for conversation infrastructure"
      }
    },

    "task-4-3-1": {
      "type": "subtask",
      "title": "Document conversation APIs and patterns",
      "status": "pending",
      "parent": "task-4-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "ConversationMemory API, state management, custom workflow integration"
      }
    },

    "task-4-4": {
      "type": "task",
      "title": "examples/README.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": ["task-4-4-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "examples/README.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Update examples index"
      }
    },

    "task-4-4-1": {
      "type": "subtask",
      "title": "Add chat and thinkdeep examples to index",
      "status": "pending",
      "parent": "task-4-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-4-5": {
      "type": "task",
      "title": "CHANGELOG.md",
      "status": "pending",
      "parent": "phase-4-files",
      "children": ["task-4-5-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "CHANGELOG.md",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Document new features"
      }
    },

    "task-4-5-1": {
      "type": "subtask",
      "title": "Add version 0.2.0 changelog entry",
      "status": "pending",
      "parent": "task-4-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Conversation infrastructure, CHAT workflow, THINKDEEP workflow"
      }
    },

    "phase-4-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-4",
      "children": ["verify-4-1", "verify-4-2", "verify-4-3"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-4-files"],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },

    "verify-4-1": {
      "type": "verify",
      "title": "Documentation is complete and accurate",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "All new features documented with examples"
      }
    },

    "verify-4-2": {
      "type": "verify",
      "title": "Examples run successfully",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "command": "python examples/chat_example.py && python examples/thinkdeep_example.py",
        "expected": "Both examples execute without errors"
      }
    },

    "verify-4-3": {
      "type": "verify",
      "title": "CLI help is complete",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "modelchorus --help && modelchorus chat --help && modelchorus thinkdeep --help",
        "expected": "All help text is clear and complete"
      }
    },

    "phase-5": {
      "type": "phase",
      "title": "Testing & Verification",
      "status": "pending",
      "parent": "spec-root",
      "children": ["phase-5-files", "phase-5-verify"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-1", "phase-2", "phase-3", "phase-4"],
        "depends": []
      },
      "total_tasks": 14,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Comprehensive testing across all new components",
        "risk_level": "low",
        "estimated_hours": 16
      }
    },

    "phase-5-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-5",
      "children": ["task-5-1", "task-5-2", "task-5-3", "task-5-4", "task-5-5", "task-5-6", "task-5-7"],
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-5-1": {
      "type": "task",
      "title": "tests/integration/test_chat_integration.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-1-1", "task-5-1-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/integration/test_chat_integration.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "End-to-end integration tests for CHAT workflow"
      }
    },

    "task-5-1-1": {
      "type": "subtask",
      "title": "Test multi-provider chat conversations",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Test with Claude, Gemini, Codex providers"
      }
    },

    "task-5-1-2": {
      "type": "subtask",
      "title": "Test long conversations (20+ turns)",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-5-2": {
      "type": "task",
      "title": "tests/integration/test_thinkdeep_integration.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-2-1", "task-5-2-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/integration/test_thinkdeep_integration.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "End-to-end integration tests for THINKDEEP workflow"
      }
    },

    "task-5-2-1": {
      "type": "subtask",
      "title": "Test complex problem investigation",
      "status": "pending",
      "parent": "task-5-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Architectural decision, bug investigation scenarios"
      }
    },

    "task-5-2-2": {
      "type": "subtask",
      "title": "Test expert validation flow",
      "status": "pending",
      "parent": "task-5-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-5-3": {
      "type": "task",
      "title": "tests/integration/test_workflow_combination.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-3-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/integration/test_workflow_combination.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Test combining multiple workflows"
      }
    },

    "task-5-3-1": {
      "type": "subtask",
      "title": "Test consensus  thinkdeep  chat workflow",
      "status": "pending",
      "parent": "task-5-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Use consensus for decision, thinkdeep for investigation, chat for refinement"
      }
    },

    "task-5-4": {
      "type": "task",
      "title": "tests/performance/test_conversation_performance.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-4-1", "task-5-4-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/performance/test_conversation_performance.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Performance and stress tests for conversation infrastructure"
      }
    },

    "task-5-4-1": {
      "type": "subtask",
      "title": "Test concurrent conversation handling",
      "status": "pending",
      "parent": "task-5-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "100+ concurrent threads"
      }
    },

    "task-5-4-2": {
      "type": "subtask",
      "title": "Test memory usage with long conversations",
      "status": "pending",
      "parent": "task-5-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Ensure no memory leaks, context window management works"
      }
    },

    "task-5-5": {
      "type": "task",
      "title": "tests/test_cli.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-5-1", "task-5-5-2"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_cli.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "CLI integration tests"
      }
    },

    "task-5-5-1": {
      "type": "subtask",
      "title": "Test all CLI commands",
      "status": "pending",
      "parent": "task-5-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "consensus, chat, thinkdeep commands with all flags"
      }
    },

    "task-5-5-2": {
      "type": "subtask",
      "title": "Test error handling and validation",
      "status": "pending",
      "parent": "task-5-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-5-6": {
      "type": "task",
      "title": "tests/test_provider_integration.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-6-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_provider_integration.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Test conversation context passing through providers"
      }
    },

    "task-5-6-1": {
      "type": "subtask",
      "title": "Test continuation_id handling across all providers",
      "status": "pending",
      "parent": "task-5-6",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },

    "task-5-7": {
      "type": "task",
      "title": "tests/test_backward_compatibility.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": ["task-5-7-1"],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "tests/test_backward_compatibility.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Ensure existing consensus workflow still works"
      }
    },

    "task-5-7-1": {
      "type": "subtask",
      "title": "Test consensus workflow unchanged",
      "status": "pending",
      "parent": "task-5-7",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "implementation_details": "Verify all existing consensus tests still pass"
      }
    },

    "phase-5-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-5",
      "children": ["verify-5-1", "verify-5-2", "verify-5-3", "verify-5-4"],
      "dependencies": {
        "blocks": [],
        "blocked_by": ["phase-5-files"],
        "depends": []
      },
      "total_tasks": 4,
      "completed_tasks": 0,
      "metadata": {}
    },

    "verify-5-1": {
      "type": "verify",
      "title": "All tests pass",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/ -v --cov=modelchorus --cov-report=term-missing",
        "expected": "All tests pass with >80% coverage"
      }
    },

    "verify-5-2": {
      "type": "verify",
      "title": "Performance benchmarks meet targets",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/performance/ -v",
        "expected": "No memory leaks, <100ms overhead for conversation management"
      }
    },

    "verify-5-3": {
      "type": "verify",
      "title": "Integration tests validate real-world usage",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "expected": "Can complete complex multi-workflow scenarios"
      }
    },

    "verify-5-4": {
      "type": "verify",
      "title": "Backward compatibility maintained",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest tests/test_backward_compatibility.py -v",
        "expected": "Existing consensus workflow still works identically"
      }
    }
  }
}
