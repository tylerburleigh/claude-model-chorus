{
  "spec_id": "persona-orchestration-study-workflow-2025-11-08-001",
  "generated": "2025-11-08T14:00:00Z",
  "last_updated": "2025-11-08T15:30:22.527440Z",
  "metadata": {
    "title": "Persona Orchestration - STUDY Workflow",
    "description": "Implement persona-based investigation workflow with multi-perspective reasoning, temporal memory, and LLM-based routing",
    "status": "active",
    "complexity": "high",
    "estimated_hours": 64,
    "review": {
      "status": "not_reviewed",
      "last_reviewed": null,
      "reviewers": [],
      "total_reviews": 0,
      "history": []
    },
    "activated_date": "2025-11-08T14:53:02.145575Z",
    "progress_percentage": 5,
    "current_phase": "phase-1"
  },
  "objectives": [
    "Enable multi-perspective investigation through sequential persona reasoning",
    "Implement temporal memory system for cross-session investigation continuity",
    "Create LLM-based routing for intelligent persona selection",
    "Integrate STUDY workflow into ModelChorus CLI and architecture",
    "Provide comprehensive testing and documentation"
  ],
  "hierarchy": {
    "spec-root": {
      "type": "spec",
      "title": "Persona Orchestration - STUDY Workflow",
      "status": "in_progress",
      "parent": null,
      "children": [
        "phase-1",
        "phase-2",
        "phase-3",
        "phase-4",
        "phase-5",
        "phase-6"
      ],
      "total_tasks": 70,
      "completed_tasks": 4,
      "metadata": {
        "description": "Complete implementation of STUDY workflow with personas, memory, and routing"
      }
    },
    "phase-1": {
      "type": "phase",
      "title": "Foundation & Core Architecture",
      "status": "in_progress",
      "parent": "spec-root",
      "children": [
        "phase-1-files",
        "phase-1-verify"
      ],
      "total_tasks": 16,
      "completed_tasks": 4,
      "metadata": {
        "purpose": "Establish foundational architecture, data models, and workflow structure",
        "risk_level": "medium",
        "estimated_hours": 12
      },
      "dependencies": {
        "blocks": [
          "phase-2"
        ]
      }
    },
    "phase-1-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "in_progress",
      "parent": "phase-1",
      "children": [
        "task-1-1",
        "task-1-2",
        "task-1-3",
        "task-1-4",
        "task-1-5",
        "task-1-6"
      ],
      "total_tasks": 13,
      "completed_tasks": 4,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-1-verify"
        ],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-1-1": {
      "type": "task",
      "title": "Analyze existing workflow patterns and architecture",
      "status": "completed",
      "parent": "phase-1-files",
      "children": [
        "task-1-1-1",
        "task-1-1-2",
        "task-1-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-1-2",
          "task-1-3"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 3,
      "metadata": {
        "task_category": "investigation",
        "estimated_hours": 2,
        "description": "Study BaseWorkflow, RoleOrchestrator, and ConversationMemory patterns"
      }
    },
    "task-1-1-1": {
      "type": "subtask",
      "title": "Review BaseWorkflow interface and inheritance pattern",
      "status": "completed",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "reference_file": "model_chorus/src/model_chorus/core/base_workflow.py",
        "started_at": "2025-11-08T14:57:56.966343Z",
        "completed_at": "2025-11-08T15:00:13.427479Z",
        "needs_journaling": false,
        "actual_hours": 0.038,
        "journaled_at": "2025-11-08T15:00:13.440432Z"
      }
    },
    "task-1-1-2": {
      "type": "subtask",
      "title": "Study RoleOrchestrator for persona implementation pattern",
      "status": "completed",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "reference_file": "model_chorus/src/model_chorus/core/role_orchestration.py",
        "started_at": "2025-11-08T15:06:34.570449Z",
        "completed_at": "2025-11-08T15:09:56.201497Z",
        "needs_journaling": false,
        "actual_hours": 0.056,
        "journaled_at": "2025-11-08T15:09:56.209633Z"
      }
    },
    "task-1-1-3": {
      "type": "subtask",
      "title": "Examine ConversationMemory for state persistence approach",
      "status": "completed",
      "parent": "task-1-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "reference_file": "model_chorus/src/model_chorus/core/conversation.py",
        "started_at": "2025-11-08T15:17:48.783723Z",
        "completed_at": "2025-11-08T15:21:15.171787Z",
        "needs_journaling": false,
        "actual_hours": 0.057,
        "journaled_at": "2025-11-08T15:21:15.182713Z"
      }
    },
    "task-1-2": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/__init__.py",
      "status": "completed",
      "parent": "phase-1-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-1-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 1,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Create STUDY workflow package with exports",
        "started_at": "2025-11-08T15:29:37.896814Z",
        "completed_at": "2025-11-08T15:30:22.510646Z",
        "needs_journaling": false,
        "actual_hours": 0.012,
        "journaled_at": "2025-11-08T15:30:22.520891Z"
      }
    },
    "task-1-3": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/study_workflow.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [
        "task-1-3-1",
        "task-1-3-2",
        "task-1-3-3"
      ],
      "dependencies": {
        "blocks": [
          "task-1-4"
        ],
        "blocked_by": [
          "task-1-1"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/study_workflow.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Implement StudyWorkflow class extending BaseWorkflow"
      }
    },
    "task-1-3-1": {
      "type": "subtask",
      "title": "Create StudyWorkflow class extending BaseWorkflow",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Implement workflow_type, execute() method, and basic workflow structure"
      }
    },
    "task-1-3-2": {
      "type": "subtask",
      "title": "Add WorkflowRegistry decorator for plugin registration",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "@WorkflowRegistry.register('study')"
      }
    },
    "task-1-3-3": {
      "type": "subtask",
      "title": "Implement basic investigation flow skeleton",
      "status": "pending",
      "parent": "task-1-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Create workflow execution loop with persona invocation hooks"
      }
    },
    "task-1-4": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/models.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [
        "task-1-4-1",
        "task-1-4-2",
        "task-1-4-3"
      ],
      "dependencies": {
        "blocks": [
          "task-1-5"
        ],
        "blocked_by": [
          "task-1-3"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/models.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Define data models for STUDY workflow"
      }
    },
    "task-1-4-1": {
      "type": "subtask",
      "title": "Create InvestigationPhase enum (DISCOVERY, VALIDATION, PLANNING, COMPLETE)",
      "status": "pending",
      "parent": "task-1-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-1-4-2": {
      "type": "subtask",
      "title": "Create ConfidenceLevel enum (EXPLORING, LOW, MEDIUM, HIGH)",
      "status": "pending",
      "parent": "task-1-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-1-4-3": {
      "type": "subtask",
      "title": "Create StudyState Pydantic model with phase, confidence, findings",
      "status": "pending",
      "parent": "task-1-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Include investigation_id, session_id, current_phase, confidence, iteration_count, findings[]"
      }
    },
    "task-1-5": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/state_machine.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [
        "task-1-5-1",
        "task-1-5-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-1-4"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/state_machine.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Implement investigation phase state machine"
      }
    },
    "task-1-5-1": {
      "type": "subtask",
      "title": "Create InvestigationStateMachine class with phase transitions",
      "status": "pending",
      "parent": "task-1-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Implement can_transition(), transition(), get_next_phase() methods"
      }
    },
    "task-1-5-2": {
      "type": "subtask",
      "title": "Add confidence level progression logic",
      "status": "pending",
      "parent": "task-1-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Methods: update_confidence(), should_escalate_phase()"
      }
    },
    "task-1-6": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/config.py",
      "status": "pending",
      "parent": "phase-1-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/config.py",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Create configuration dataclass for STUDY workflow defaults"
      }
    },
    "phase-1-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-1",
      "children": [
        "verify-1-1",
        "verify-1-2",
        "verify-1-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-1-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-1-1": {
      "type": "verify",
      "title": "Import validation - workflow and models load correctly",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "python -c 'from model_chorus.workflows.study import StudyWorkflow, StudyState'",
        "expected": "No import errors, all modules load successfully"
      }
    },
    "verify-1-2": {
      "type": "verify",
      "title": "State machine transitions follow valid paths",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest model_chorus/tests/workflows/study/test_state_machine.py",
        "expected": "All state transition tests pass"
      }
    },
    "verify-1-3": {
      "type": "verify",
      "title": "Phase 1 implementation fidelity review",
      "status": "pending",
      "parent": "phase-1-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "fidelity",
        "skill": "sdd-fidelity-review",
        "scope": "phase",
        "target": "phase-1",
        "on_failure": {
          "consult": true,
          "revert_status": "in_progress",
          "continue_on_failure": false
        },
        "command": "",
        "expected": ""
      }
    },
    "phase-2": {
      "type": "phase",
      "title": "Persona System Implementation",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-2-files",
        "phase-2-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-3"
        ],
        "blocked_by": [
          "phase-1"
        ],
        "depends": []
      },
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement three core personas with distinct reasoning approaches",
        "risk_level": "medium",
        "estimated_hours": 10
      }
    },
    "phase-2-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "task-2-1",
        "task-2-2",
        "task-2-3",
        "task-2-4",
        "task-2-5"
      ],
      "total_tasks": 7,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-2-verify"
        ]
      }
    },
    "task-2-1": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/persona.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [
        "task-2-1-1",
        "task-2-1-2",
        "task-2-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-2-2",
          "task-2-3",
          "task-2-4"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/persona.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Create base Persona class and configuration"
      }
    },
    "task-2-1-1": {
      "type": "subtask",
      "title": "Create Persona dataclass with name, prompt_template, temperature, max_tokens",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-2-1-2": {
      "type": "subtask",
      "title": "Create PersonaRegistry class for managing available personas",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Methods: register(), get(), list_all()"
      }
    },
    "task-2-1-3": {
      "type": "subtask",
      "title": "Add persona execution interface with invoke() method",
      "status": "pending",
      "parent": "task-2-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Takes context, returns PersonaResponse with findings and confidence update"
      }
    },
    "task-2-2": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/personas/researcher.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-2-5"
        ],
        "blocked_by": [
          "task-2-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/personas/researcher.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Implement Researcher persona with deep analysis focus"
      }
    },
    "task-2-3": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/personas/critic.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-2-5"
        ],
        "blocked_by": [
          "task-2-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/personas/critic.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Implement Critic persona with challenge and stress-test focus"
      }
    },
    "task-2-4": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/personas/planner.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [
          "task-2-5"
        ],
        "blocked_by": [
          "task-2-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/personas/planner.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Implement Planner persona with actionable roadmap focus"
      }
    },
    "task-2-5": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/personas/__init__.py",
      "status": "pending",
      "parent": "phase-2-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-2-2",
          "task-2-3",
          "task-2-4"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/personas/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Create personas package with exports and registry initialization"
      }
    },
    "phase-2-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-2",
      "children": [
        "verify-2-1",
        "verify-2-2",
        "verify-2-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-2-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-2-1": {
      "type": "verify",
      "title": "All three personas registered and accessible",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "python -c 'from model_chorus.workflows.study.personas import PersonaRegistry; assert len(PersonaRegistry.list_all()) == 3'",
        "expected": "Three personas: researcher, critic, planner"
      }
    },
    "verify-2-2": {
      "type": "verify",
      "title": "Persona prompts have distinct reasoning approaches",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "checklist": [
          "Researcher focuses on evidence gathering and pattern identification",
          "Critic challenges assumptions and identifies weaknesses",
          "Planner creates actionable implementation steps"
        ],
        "command": "",
        "expected": ""
      }
    },
    "verify-2-3": {
      "type": "verify",
      "title": "Phase 2 implementation fidelity review",
      "status": "pending",
      "parent": "phase-2-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "fidelity",
        "skill": "sdd-fidelity-review",
        "scope": "phase",
        "target": "phase-2",
        "on_failure": {
          "consult": true,
          "revert_status": "in_progress",
          "continue_on_failure": false
        },
        "command": "",
        "expected": ""
      }
    },
    "phase-3": {
      "type": "phase",
      "title": "LLM-Based Routing System",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-3-files",
        "phase-3-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-4"
        ],
        "blocked_by": [
          "phase-2"
        ],
        "depends": []
      },
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement intelligent persona routing using LLM-based skill analysis",
        "risk_level": "medium",
        "estimated_hours": 8
      }
    },
    "phase-3-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-3",
      "children": [
        "task-3-1",
        "task-3-2",
        "task-3-3"
      ],
      "total_tasks": 7,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-3-verify"
        ],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-3-1": {
      "type": "task",
      "title": ".claude/skills/study-routing/SKILL.md",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [
        "task-3-1-1",
        "task-3-1-2",
        "task-3-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-3-2"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": ".claude/skills/study-routing/SKILL.md",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Create routing skill for persona selection analysis"
      }
    },
    "task-3-1-1": {
      "type": "subtask",
      "title": "Define skill frontmatter with context analysis parameters",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Input: current_phase, confidence, findings, unresolved_questions, prior_persona"
      }
    },
    "task-3-1-2": {
      "type": "subtask",
      "title": "Create routing decision prompt template",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Analyze investigation state and recommend next persona with reasoning"
      }
    },
    "task-3-1-3": {
      "type": "subtask",
      "title": "Define structured output format (JSON with persona, reasoning, confidence)",
      "status": "pending",
      "parent": "task-3-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-3-2": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/routing.py",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [
        "task-3-2-1",
        "task-3-2-2",
        "task-3-2-3"
      ],
      "dependencies": {
        "blocks": [
          "task-3-3"
        ],
        "blocked_by": [
          "task-3-1"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/routing.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Implement routing logic that invokes LLM-based skill"
      }
    },
    "task-3-2-1": {
      "type": "subtask",
      "title": "Create PersonaRouter class with skill invocation",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Invoke study-routing skill with investigation context"
      }
    },
    "task-3-2-2": {
      "type": "subtask",
      "title": "Add routing decision tracking and logging",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Store routing history: timestamp, context, decision, reasoning"
      }
    },
    "task-3-2-3": {
      "type": "subtask",
      "title": "Implement fallback routing logic if skill invocation fails",
      "status": "pending",
      "parent": "task-3-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Simple rule-based fallback: DISCOVERY->researcher, VALIDATION->critic, PLANNING->planner"
      }
    },
    "task-3-3": {
      "type": "task",
      "title": "Integrate routing into StudyWorkflow",
      "status": "pending",
      "parent": "phase-3-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-3-2"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/study_workflow.py",
        "task_category": "refactoring",
        "estimated_hours": 1,
        "description": "Update StudyWorkflow to use PersonaRouter for persona selection"
      }
    },
    "phase-3-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-3",
      "children": [
        "verify-3-1",
        "verify-3-2",
        "verify-3-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-3-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-3-1": {
      "type": "verify",
      "title": "Routing skill invokes successfully and returns valid JSON",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest model_chorus/tests/workflows/study/test_routing.py::test_routing_skill_invocation",
        "expected": "Skill returns persona recommendation with reasoning"
      }
    },
    "verify-3-2": {
      "type": "verify",
      "title": "Fallback routing works when skill unavailable",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest model_chorus/tests/workflows/study/test_routing.py::test_fallback_routing",
        "expected": "Fallback rules provide valid persona selection"
      }
    },
    "verify-3-3": {
      "type": "verify",
      "title": "Phase 3 implementation fidelity review",
      "status": "pending",
      "parent": "phase-3-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "fidelity",
        "skill": "sdd-fidelity-review",
        "scope": "phase",
        "target": "phase-3",
        "on_failure": {
          "consult": true,
          "revert_status": "in_progress",
          "continue_on_failure": false
        },
        "command": "",
        "expected": ""
      }
    },
    "phase-4": {
      "type": "phase",
      "title": "Memory System Implementation",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-4-files",
        "phase-4-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-5"
        ],
        "blocked_by": [
          "phase-3"
        ],
        "depends": []
      },
      "total_tasks": 15,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Implement dual-layer memory system with caching and persistence",
        "risk_level": "high",
        "estimated_hours": 16
      }
    },
    "phase-4-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-4",
      "children": [
        "task-4-1",
        "task-4-2",
        "task-4-3",
        "task-4-4",
        "task-4-5"
      ],
      "total_tasks": 12,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-4-verify"
        ],
        "blocked_by": [],
        "depends": []
      }
    },
    "task-4-1": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/memory/__init__.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/memory/__init__.py",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Create memory package structure"
      }
    },
    "task-4-2": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/memory/models.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-2-1",
        "task-4-2-2"
      ],
      "dependencies": {
        "blocks": [
          "task-4-3",
          "task-4-4"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/memory/models.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Define memory entry data models"
      }
    },
    "task-4-2-1": {
      "type": "subtask",
      "title": "Create MemoryEntry Pydantic model",
      "status": "pending",
      "parent": "task-4-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Fields: investigation_id, session_id, timestamp, persona, findings, evidence, confidence_before, confidence_after, memory_references"
      }
    },
    "task-4-2-2": {
      "type": "subtask",
      "title": "Create MemoryQuery model for search operations",
      "status": "pending",
      "parent": "task-4-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Support filtering by: investigation_id, persona, confidence_level, time_range"
      }
    },
    "task-4-3": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/memory/cache.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-3-1",
        "task-4-3-2",
        "task-4-3-3"
      ],
      "dependencies": {
        "blocks": [
          "task-4-5"
        ],
        "blocked_by": [
          "task-4-2"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/memory/cache.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Implement in-memory short-term cache"
      }
    },
    "task-4-3-1": {
      "type": "subtask",
      "title": "Create ShortTermCache class with LRU eviction",
      "status": "pending",
      "parent": "task-4-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Use OrderedDict for LRU, configurable max size (default 100 entries)"
      }
    },
    "task-4-3-2": {
      "type": "subtask",
      "title": "Implement cache operations: get, put, invalidate",
      "status": "pending",
      "parent": "task-4-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-4-3-3": {
      "type": "subtask",
      "title": "Add cache metrics tracking (hits, misses, evictions)",
      "status": "pending",
      "parent": "task-4-3",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-4-4": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/memory/persistence.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-4-1",
        "task-4-4-2",
        "task-4-4-3"
      ],
      "dependencies": {
        "blocks": [
          "task-4-5"
        ],
        "blocked_by": [
          "task-4-2"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/memory/persistence.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "Implement SQLite-based long-term persistence"
      }
    },
    "task-4-4-1": {
      "type": "subtask",
      "title": "Create LongTermStorage class with SQLite backend",
      "status": "pending",
      "parent": "task-4-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Database schema: investigations, memory_entries, memory_references tables"
      }
    },
    "task-4-4-2": {
      "type": "subtask",
      "title": "Implement storage operations: save, query, get_by_investigation",
      "status": "pending",
      "parent": "task-4-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-4-4-3": {
      "type": "subtask",
      "title": "Add indexing for efficient queries (investigation_id, timestamp, persona)",
      "status": "pending",
      "parent": "task-4-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-4-5": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/workflows/study/memory/controller.py",
      "status": "pending",
      "parent": "phase-4-files",
      "children": [
        "task-4-5-1",
        "task-4-5-2",
        "task-4-5-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-4-3",
          "task-4-4"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/workflows/study/memory/controller.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "Create memory controller coordinating cache and persistence"
      }
    },
    "task-4-5-1": {
      "type": "subtask",
      "title": "Create MemoryController class coordinating short-term and long-term",
      "status": "pending",
      "parent": "task-4-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Automatic write-through from cache to persistence"
      }
    },
    "task-4-5-2": {
      "type": "subtask",
      "title": "Implement unified query interface with cache-first lookup",
      "status": "pending",
      "parent": "task-4-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Check cache first, fallback to persistence, promote to cache on hit"
      }
    },
    "task-4-5-3": {
      "type": "subtask",
      "title": "Add memory lifecycle: store, retrieve, context_window_management",
      "status": "pending",
      "parent": "task-4-5",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Context window management: retrieve most relevant memories, hierarchical compression"
      }
    },
    "phase-4-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-4",
      "children": [
        "verify-4-1",
        "verify-4-2",
        "verify-4-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-4-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-4-1": {
      "type": "verify",
      "title": "Memory persistence and retrieval works correctly",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest model_chorus/tests/workflows/study/memory/test_persistence.py",
        "expected": "All memory CRUD operations succeed, data persists across sessions"
      }
    },
    "verify-4-2": {
      "type": "verify",
      "title": "Cache eviction and promotion working as expected",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest model_chorus/tests/workflows/study/memory/test_cache.py",
        "expected": "LRU eviction triggers correctly, cache metrics accurate"
      }
    },
    "verify-4-3": {
      "type": "verify",
      "title": "Phase 4 implementation fidelity review",
      "status": "pending",
      "parent": "phase-4-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "fidelity",
        "skill": "sdd-fidelity-review",
        "scope": "phase",
        "target": "phase-4",
        "on_failure": {
          "consult": true,
          "revert_status": "in_progress",
          "continue_on_failure": false
        },
        "command": "",
        "expected": ""
      }
    },
    "phase-5": {
      "type": "phase",
      "title": "CLI Integration",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-5-files",
        "phase-5-verify"
      ],
      "dependencies": {
        "blocks": [
          "phase-6"
        ],
        "blocked_by": [
          "phase-4"
        ],
        "depends": []
      },
      "total_tasks": 10,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Integrate STUDY workflow into ModelChorus CLI",
        "risk_level": "low",
        "estimated_hours": 8
      }
    },
    "phase-5-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-5",
      "children": [
        "task-5-1",
        "task-5-2",
        "task-5-3",
        "task-5-4"
      ],
      "total_tasks": 7,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-5-verify"
        ]
      }
    },
    "task-5-1": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/cli/study_commands.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [
        "task-5-1-1",
        "task-5-1-2",
        "task-5-1-3"
      ],
      "dependencies": {
        "blocks": [
          "task-5-2",
          "task-5-4"
        ],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/cli/study_commands.py",
        "task_category": "implementation",
        "estimated_hours": 4,
        "description": "Create CLI commands for STUDY workflow"
      }
    },
    "task-5-1-1": {
      "type": "subtask",
      "title": "Implement `study` command for new investigations",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Usage: model-chorus study --scenario 'investigation description' [--provider claude]"
      }
    },
    "task-5-1-2": {
      "type": "subtask",
      "title": "Implement `study-next` command for continuing investigations",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Usage: model-chorus study-next --investigation <uuid>"
      }
    },
    "task-5-1-3": {
      "type": "subtask",
      "title": "Implement `study-view` command for memory inspection",
      "status": "pending",
      "parent": "task-5-1",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "Usage: model-chorus study-view --investigation <uuid> [--persona researcher]"
      }
    },
    "task-5-2": {
      "type": "task",
      "title": "model_chorus/src/model_chorus/cli/main.py",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [
        "task-5-2-1",
        "task-5-2-2"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-5-1"
        ],
        "depends": []
      },
      "total_tasks": 2,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/src/model_chorus/cli/main.py",
        "task_category": "refactoring",
        "estimated_hours": 1,
        "description": "Register STUDY commands in main CLI"
      }
    },
    "task-5-2-1": {
      "type": "subtask",
      "title": "Import and register study command group",
      "status": "pending",
      "parent": "task-5-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "details": "app.add_typer(study_app, name='study')"
      }
    },
    "task-5-2-2": {
      "type": "subtask",
      "title": "Add study command to help text and documentation",
      "status": "pending",
      "parent": "task-5-2",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-5-3": {
      "type": "task",
      "title": ".model-chorusrc",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": ".model-chorusrc",
        "task_category": "implementation",
        "estimated_hours": 0.5,
        "description": "Add STUDY workflow configuration defaults"
      }
    },
    "task-5-4": {
      "type": "task",
      "title": "README.md",
      "status": "pending",
      "parent": "phase-5-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "task-5-1"
        ],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "README.md",
        "task_category": "implementation",
        "estimated_hours": 1,
        "description": "Add STUDY workflow documentation to README"
      }
    },
    "phase-5-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-5",
      "children": [
        "verify-5-1",
        "verify-5-2",
        "verify-5-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-5-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-5-1": {
      "type": "verify",
      "title": "All CLI commands available and show help text",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "model-chorus study --help && model-chorus study-next --help && model-chorus study-view --help",
        "expected": "All commands display help text without errors"
      }
    },
    "verify-5-2": {
      "type": "verify",
      "title": "Basic investigation flow works end-to-end",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "checklist": [
          "Start investigation: model-chorus study --scenario 'test investigation'",
          "Continue investigation: model-chorus study-next --investigation <uuid>",
          "View memory: model-chorus study-view --investigation <uuid>",
          "Verify memory persists across commands"
        ],
        "command": "",
        "expected": ""
      }
    },
    "verify-5-3": {
      "type": "verify",
      "title": "Phase 5 implementation fidelity review",
      "status": "pending",
      "parent": "phase-5-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "fidelity",
        "skill": "sdd-fidelity-review",
        "scope": "phase",
        "target": "phase-5",
        "on_failure": {
          "consult": true,
          "revert_status": "in_progress",
          "continue_on_failure": false
        },
        "command": "",
        "expected": ""
      }
    },
    "phase-6": {
      "type": "phase",
      "title": "Testing & Documentation",
      "status": "pending",
      "parent": "spec-root",
      "children": [
        "phase-6-files",
        "phase-6-verify"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-5"
        ],
        "depends": []
      },
      "total_tasks": 9,
      "completed_tasks": 0,
      "metadata": {
        "purpose": "Comprehensive testing and documentation for production readiness",
        "risk_level": "low",
        "estimated_hours": 10
      }
    },
    "phase-6-files": {
      "type": "group",
      "title": "File Modifications",
      "status": "pending",
      "parent": "phase-6",
      "children": [
        "task-6-1",
        "task-6-2",
        "task-6-3",
        "task-6-4"
      ],
      "total_tasks": 6,
      "completed_tasks": 0,
      "metadata": {},
      "dependencies": {
        "blocks": [
          "phase-6-verify"
        ]
      }
    },
    "task-6-1": {
      "type": "task",
      "title": "model_chorus/tests/workflows/study/test_study_workflow.py",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/tests/workflows/study/test_study_workflow.py",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Create integration tests for complete workflow"
      }
    },
    "task-6-2": {
      "type": "task",
      "title": "model_chorus/tests/workflows/study/test_personas.py",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/tests/workflows/study/test_personas.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Create unit tests for persona system"
      }
    },
    "task-6-3": {
      "type": "task",
      "title": "model_chorus/tests/workflows/study/test_routing.py",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "model_chorus/tests/workflows/study/test_routing.py",
        "task_category": "implementation",
        "estimated_hours": 2,
        "description": "Create tests for routing logic and skill invocation"
      }
    },
    "task-6-4": {
      "type": "task",
      "title": "docs/workflows/STUDY.md",
      "status": "pending",
      "parent": "phase-6-files",
      "children": [
        "task-6-4-1",
        "task-6-4-2",
        "task-6-4-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {
        "file_path": "docs/workflows/STUDY.md",
        "task_category": "implementation",
        "estimated_hours": 3,
        "description": "Create comprehensive STUDY workflow documentation"
      }
    },
    "task-6-4-1": {
      "type": "subtask",
      "title": "Document workflow overview and use cases",
      "status": "pending",
      "parent": "task-6-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-6-4-2": {
      "type": "subtask",
      "title": "Document CLI commands with examples",
      "status": "pending",
      "parent": "task-6-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "task-6-4-3": {
      "type": "subtask",
      "title": "Document memory system and investigation lifecycle",
      "status": "pending",
      "parent": "task-6-4",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {}
    },
    "phase-6-verify": {
      "type": "group",
      "title": "Verification",
      "status": "pending",
      "parent": "phase-6",
      "children": [
        "verify-6-1",
        "verify-6-2",
        "verify-6-3"
      ],
      "dependencies": {
        "blocks": [],
        "blocked_by": [
          "phase-6-files"
        ],
        "depends": []
      },
      "total_tasks": 3,
      "completed_tasks": 0,
      "metadata": {}
    },
    "verify-6-1": {
      "type": "verify",
      "title": "All tests pass with adequate coverage",
      "status": "pending",
      "parent": "phase-6-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "auto",
        "command": "pytest model_chorus/tests/workflows/study/ --cov=model_chorus.workflows.study --cov-report=term",
        "expected": "All tests pass, coverage > 80%"
      }
    },
    "verify-6-2": {
      "type": "verify",
      "title": "Documentation is complete and accurate",
      "status": "pending",
      "parent": "phase-6-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "manual",
        "checklist": [
          "All CLI commands documented with examples",
          "Workflow overview clear and comprehensive",
          "Use cases demonstrate value proposition",
          "Memory system explained with diagrams",
          "Troubleshooting section included"
        ],
        "command": "",
        "expected": ""
      }
    },
    "verify-6-3": {
      "type": "verify",
      "title": "Phase 6 implementation fidelity review",
      "status": "pending",
      "parent": "phase-6-verify",
      "children": [],
      "dependencies": {
        "blocks": [],
        "blocked_by": [],
        "depends": []
      },
      "total_tasks": 1,
      "completed_tasks": 0,
      "metadata": {
        "verification_type": "fidelity",
        "skill": "sdd-fidelity-review",
        "scope": "phase",
        "target": "phase-6",
        "on_failure": {
          "consult": true,
          "revert_status": "in_progress",
          "continue_on_failure": false
        },
        "command": "",
        "expected": ""
      }
    }
  },
  "journal": [
    {
      "timestamp": "2025-11-08T15:00:13.440412Z",
      "entry_type": "status_change",
      "title": "Task Completed: Review BaseWorkflow interface and inheritance pattern",
      "author": "claude-code",
      "content": "Successfully reviewed BaseWorkflow interface and inheritance patterns. Key findings:\n\n1. BaseWorkflow provides solid abstract foundation with run() method, provider fallback utilities, conversation support, and structured WorkflowResult format\n2. Identified architectural drift: ConsensusWorkflow does NOT inherit from BaseWorkflow (uses execute() instead of run(), custom ConsensusResult type)\n3. Documented clear inheritance pattern for StudyWorkflow: should inherit from BaseWorkflow, use WorkflowStep.metadata for persona-specific data, leverage _execute_with_fallback() for resilience\n4. Identified 4 architectural gaps: progress events, multi-round pattern, provider strategy guidance, synthesis sophistication\n5. Created comprehensive findings document with recommendations for STUDY implementation\n\nAll research objectives met. Ready to proceed with task-1-1-2 (Study Consensus workflow patterns).",
      "metadata": {},
      "task_id": "task-1-1-1"
    },
    {
      "timestamp": "2025-11-08T15:09:56.209620Z",
      "entry_type": "status_change",
      "title": "Task Completed: Study RoleOrchestrator for persona implementation pattern",
      "author": "claude-code",
      "content": "Successfully analyzed RoleOrchestrator infrastructure for persona implementation. Key findings:\n\n1. ModelRole provides excellent persona definition with role, model, stance, prompts, temperature, and extensible metadata field - perfect for STUDY personas with expertise/focus/hypothesis tracking\n2. RoleOrchestrator supports SEQUENTIAL (turn-taking) and PARALLEL (concurrent) execution patterns with critical context parameter enabling multi-round dialogue\n3. Four synthesis strategies analyzed: NONE, CONCATENATE (display), STRUCTURED (tracking), AI_SYNTHESIZE (hypothesis refinement) - AI_SYNTHESIZE ideal for STUDY's hypothesis evolution\n4. Recommended composition pattern: StudyWorkflow inherits BaseWorkflow, composes RoleOrchestrator internally for multi-round logic\n5. Identified gaps: multi-round loop (STUDY responsibility), hypothesis tracking (metadata + STRUCTURED), dynamic pattern switching for hybrid mode\n\nCreated comprehensive findings document with implementation guidance. Ready to proceed with task-1-1-3 (Study Zen MCP STUDY reference).",
      "metadata": {},
      "task_id": "task-1-1-2"
    },
    {
      "timestamp": "2025-11-08T15:21:15.182696Z",
      "entry_type": "status_change",
      "title": "Task Completed: Examine ConversationMemory for state persistence approach",
      "author": "claude-code",
      "content": "Successfully analyzed ConversationMemory infrastructure for state persistence. Key findings:\n\n1. File-based persistence with UUID threads, file locking, TTL-based cleanup survives process restarts - perfect for multi-session research\n2. Thread lifecycle management with active/completed/archived states and automatic expiration (default 3 hours, recommend 24 for STUDY)\n3. thread.state dict is primary state persistence mechanism - recommend Pydantic models (StudyState, RoundState, PersonaPosition) following ThinkDeepState pattern\n4. build_conversation_history() provides rich context with file tracking and message truncation - recommend hybrid strategy (conversation memory + round synthesis)\n5. Complete integration pattern documented: StudyWorkflow(BaseWorkflow) + RoleOrchestrator + ConversationMemory\n\nCreated comprehensive findings document with state management patterns, context strategies, and complete integration example. Ready for task-1-2 (Design StudyWorkflow skeleton).",
      "metadata": {},
      "task_id": "task-1-1-3"
    },
    {
      "timestamp": "2025-11-08T15:30:22.520865Z",
      "entry_type": "status_change",
      "title": "Task Completed: model_chorus/src/model_chorus/workflows/study/__init__.py",
      "author": "claude-code",
      "content": "Successfully created STUDY workflow package directory structure with __init__.py file. The package follows established patterns from other workflows (ideate, argument) with proper docstring and exports. Directory created at model_chorus/src/model_chorus/workflows/study/ with __init__.py exporting StudyWorkflow (to be implemented in next task). Package structure verified and matches existing workflow conventions.",
      "metadata": {},
      "task_id": "task-1-2"
    }
  ]
}